{% load static %}
{% load i18n %}
{#{% load crispy_forms_tags %}#}
{% load auth_forms %}
{% load sekizai_tags %}


<!DOCTYPE html>
<html>
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>{% block title %}{% trans "SpacesMap：Your best incubator selection tool!" %}{% endblock %}</title>
    <meta name="description" content={% trans "Looking for the best coworking spaces? Read real reviews, get prices, see photos, view maps and more. Find your perfect coworking space in 100+ countries!" %}>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="coworker.com" name="author">
    <meta content={% trans "Office, Share,Work,SpacesMap" %} name="keywords">
    <meta content="coworker.png" property="og:image">
    {% block meta_block %} {% endblock %}
    {% render_block "css" %}

    {% render_block "js" %}

    {% addtoblock "css" %}
        <link href="{% static 'css/bootstrap.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'css/style-res.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'css/stylesheet.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'css/font-awesome.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'css/my_css.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'css/my_css1.css' %}" rel="stylesheet" type="text/css">
        <link href={% static "css/validationEngine.jquery.css" %} rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link href="{% static 'css/sweetalert.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'css/flags.css' %}" rel="stylesheet">
        <link href="{% static 'not_sure/css(2)' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'css/fonts.css' %}" rel="stylesheet" type="text/css"><!--DOCK HEADER-->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
        <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/formValidation.min.css' %}">
        <link href="{% static 'css/owl.carousel.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'css/owl.theme.css' %}" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ==" crossorigin="">
        <link href="{% static 'css/my_style.css' %}" rel="stylesheet" type="text/css">
        <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap/3/css/bootstrap.css" />
        <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />
        <link rel="stylesheet" href="{% static "css/new-form.css" %}">
{#<script src="https://code.jquery.com/jquery-1.12.4.js"></script>#}

<!-- Include Date Range Picker -->



    {% endaddtoblock %}


    {% addtoblock "js" %}
        <script src="{% static 'js/jquery.min.js' %}" type="text/javascript"></script>
        <script type="text/javascript" src="//cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
        <script type="text/javascript" src="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js" integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin=""></script>
        <script src="{% static 'js/bootstrap.min.js' %}"></script>
        <script src="{% static 'js/formValidation.min.js' %}"></script>
        <script src="{% static 'js/fv.bootstrap.min.js' %}"></script>
        <script src="{% static 'js/jquery.cookie.js' %}"></script>
        <script async src="{% static 'js/amplitude-3.4.0-min.gz.js' %}" type="text/javascript"></script>
        <script charset="utf-8" src="{% static "js/jquery.validationEngine-en.js" %}" type="text/javascript"></script>
        <script src="{% static "js/select2.js" %}"></script>
        <script>
          $(window).scroll(function(){
            var nav_main = $('.header_nav_con'),
              scroll = $(window).scrollTop();

            if (scroll >= 520) nav_main.addClass('fixed');
            else nav_main.removeClass('fixed');
          });
        </script>
        <script type="text/javascript">
          $(document).ready(function(){
            $('a.res_menu').click(function(){
              $('.mobile_menu').fadeIn();
            });
            $('.minus_outer').click(function(){
              $('.mobile_menu').fadeOut();
            });
            $(window).resize(function(){
              var hgt = $(".hot_coworker_inn").height()- 1;
              $(".coworking_hot_destination_outer").height(hgt);
            });
          });
          $(window).load(function(){
            var hgt = $(".hot_coworker_inn").height()- 1;
            $(".coworking_hot_destination_outer").height(hgt);
          });
        </script>
        <script type="text/javascript" src="http://api.map.baidu.com/api?key=ctDShmu7hqaGe7GPUEwgpfZDBMiilQxQ&v=1.2&amp;services=true"></script>



        <script type="text/javascript">
        $(window).scroll(function(){
          var sticky = $('.nginx_main_rgt'),
          scroll = $(window).scrollTop();
          var scroll_me = false;
          $( window ).resize(function() {
          var wd = $( this ).width();
          if(wd >= '768' && wd <= '991'){
            scroll_me = true;
          } else if(wd >= '992' ){
            scroll_me = true;
          } else {
          }
        });
          if($( window ).width() >= '992') {
            scroll_me = true;
          }
        });
    </script>

    {% endaddtoblock %}
    {% block static_files %}
    {% endblock %}
</head>

<body class="{% block body_class %} {% endblock %}">
{% block body_block %}
<!--DOCK HEADER-->
<div class="main_outer {% if is_popup %}popup {% endif %}{% block bodyclass %}{% endblock %}">

    <div class="modal fade" id="forgot_password" role="dialog">
        <div class="modal-forgot_password">
            <div class="col-xs-12 pade_none login_forgot_pass_outer">
                <div class="col-xs-12 pade_none login_forgot_pass_inner">
                    <button class="close" data-dismiss="modal" onclick="closeContact();" type="button">×</button>
                    <h2>重置密码</h2>
                    <div class="col-xs-12 login_forget_content">
                        <p>{% trans "Enter your registered email address, we will email a link to reset your password." %}</p>
                        <div class="col-xs-121 pade_none login_forget_input_outer">
                            <input class="validate[required,custom[email],funcCall[is_EmailDoesnotExists[email-recovery]]]" id="email-reset" name="email-reset" placeholder="Email" type="text">
                        </div>
                        <div class="forget_submit_button">
                            <button name="Sent Reset Link" onclick="ValidateRecovery();">
                                <span id="LblSend">{% trans "Send reset link" %}</span></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-12 col-md-12 col-xs-12 popup_outer" id="messageEmail_Modal">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-md-11 col-xs-12 pade_none" id="r_popup">
                    <div class="col-sm-12 col-md-12 col-xs-12 pade_none email_message">
                        <i aria-hidden="true" class="fa fa-commenting"></i> {% trans "A link to the reset password has been sent" %}" <span id="message_email">test@gmail.com</span> <button class="close" data-dismiss="modal" onclick="closeMessageEmail();" type="button">×</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <style>
        .formErrorArrow div{
            background: #00d191 !important;
        }
        .formErrorContent{
            background: #00d191 !important;
        }
    </style>

    <script>
      var EmailDoesNotExists = false;

      function ResetPasswordModal(e) {
        e.preventDefault();
        $('#nvloginModal').modal('hide');
        $('#forgot_password').modal('toggle');
      }
      function ValidateRecovery(args) {
        EmailDoesNotExists = false;
        if ($("#email-reset").validationEngine('validate')) {
          SendRecovery();
        }
      }
      function SendRecovery() {
        $("#LblSend").html('<i class="fa fa-spinner fa-spin" aria-hidden="true"><\/i>');
        $.post("{% url 'account_reset_password' %}",
          {
            email: $("#email-reset").val(),
          },
          function(data, status){
            debugger;
            if (data == "0") {
              EmailDoesNotExists = true;
              $(".formError").remove();
              $("#email-reset").validationEngine('validate');
              $("#LblSend").html('Sent Reset Link');
            }else{
              //location.reload();
              $('#forgot_password').modal('toggle');
              $('#message_email').html($("#email-reset").val());
              $('#r_popup').flexModal();
              $("#LblSend").html('Sent Reset Link');
              $("#email-reset").val('');
            }
          });
      }
      function is_EmailDoesnotExists(field, rules, i, options){
        if(EmailDoesNotExists){
          return "This email is not a registered Coworker user";
        }
      }
      function closeMessageEmail(){
        $('#flex-overlay').click();
      }
    </script> <!--HEADER END-->

    <!--HEADER START-->
    {% block header %}
        {% include 'elements/header.html' %}
    {% endblock %}
    <!--HEADER END-->

    {% block content %}

    {% endblock %}
    {% block top_cities %}
{#        {% include 'elements/top_cities_list.html' %}#}
    {% endblock %}
</div>

<!--GREEN FOOTER STRT-->
<!-- FOOTER START-->
{% block footer %}
    {% include 'elements/footer.html' %}
{% endblock %}
<!--GREEN FOOTER END-->

{% endblock body_block %}

<script>
  function register_join(){
    var email = $('#join_tribe').val();
    if (validateEmail(email)){
      $.ajax({
        'url' : 'https://www.coworker.com/register_join',
        'type' : 'POST',
        'data' : {'email' : email},
        'success' : function(data){
          if(data=='saved') {
            swal({ title: "BOOM you're in!", text: "Welcome to the coworking crew, homie.", confirmButtonText: "Keep Exploring",imageUrl: "https://www.coworker.com/template/img/signup.gif"});
          } else {
            swal("BOOM you're in!", "Email already joined", "error");
          }
        }
      });
    } else {
      alert('Invalid Email');
    }
  }
  function validateEmail(email) {
    var re = /\S+@\S+\.\S+/;
    return re.test(email);
  }
</script>
<script src="{% static 'js/bootstrap.js' %}" type="text/javascript">
</script>
<script src="{% static 'js/jquery-ui.min.js' %}">
</script>
<script src="{% static 'js/sweetalert.min.js' %}">
</script>
<script src="{% static 'js/coworkerPopups.js' %}">
</script>
<script type="text/javascript">
  function submitSearch() {
    window.location = '/search/?q='+$("#f_location").val();
{#    if($("#x_location").val()!=$("#f_location").val()) {#}
{#      $("#place_id").val(0);#}
{#      $("#search_place").val(0);#}
{#    }#}
{#    $.ajax({#}
{#      url: '{% url "place:search" %}/start',#}
{#      dataType: "json",#}
{#      type: "POST",#}
{#      data: {#}
{#        place_id     : $("#place_id").val(),#}
{#        search_place : $("#search_place").val(),#}
{#        f_location   : $("#f_location").val(),#}
{#        form_search  : 1#}
{#      },#}
{#      success: function(data) {#}
{#        window.location = 'search/'+data.s_url;#}
{#      }#}
{#    });#}
{#  }#}
  $("#f_location").keypress(function(event) {
    if (event.which == 13) {
      event.preventDefault();
      submitSearch();
    }
  });
  $(document).ready(function() {
    var owl = $('#owl-demo02');
    owl.owlCarousel({
      stagePadding: 0,
      margin: 10,
      nav: true,
      loop: true,
      responsive: {
        0   : { items: 2 },
        600 : { items: 3 },
        900 : { items: 5 },
        1000: { items: 6 }
      }
    });
    var owl = $('#owl-demo03');
    owl.owlCarousel({
      stagePadding: 0,
      margin: 10,
      nav: true,
      loop: true,
      responsive: {
        0   : { items: 1 },
        400 : { items: 1 },
        600 : { items: 2 },
        768 : { items: 3 },
        900 : { items: 3 },
        1000: { items: 4 },
        1200: { items: 5 },
        1300: { items: 5 },
        1400: { items: 5 }
      }
    });
    $("#owl-demo05").owlCarousel({
      navigation : true,
      slideSpeed : 300,
      paginationSpeed : 400,
      singleItem : true,
      nav: true,
      loop: true,
      items : 1,
    });
  });
</script>
<script type="text/javascript">

  var msg_login = 0;
  $(document).ready(function(){
    {#    $('body').append($('<div>', {id:'nvmyLoading',class: 'modal'}));#}
    {#    $('#nvmyLoading').initLoading({pathLoading:'https://www.coworker.com/'});#}
    {#    $('body').append($('<div>', {id:'nvloginModal',class: 'modal'}));#}
    {#    $('#nvloginModal').initLogin({pathLoading:'https://www.coworker.com/'});#}
    {#    $('body').append($('<div>', {id:'nvmy_Modal',class: 'popup_outer'}));#}
    {#    #}
    {#    $('#nvmy_Modal').initSignup({pathLoading:'https://www.coworker.com/'});#}
    {#    #}
    {#    #}
    {#    $('body').append($('<div>', {id:'nvmy_Signup',class: 'container modal'}));#}
    {#    #}
    {#    $('#nvmy_Signup').initNewSignup({pathLoading:'https://www.coworker.com/'});#}

    $('.form_outer').click(function(event) {
      if(event.target.id=='fo_target'){
        $('#nvmy_Signup').modal('hide');
      } else{
        event.stopPropagation();
      }
    });
    $('#top').click(function(){
      $('#n_popup').flexModal({align: "top", y_offset: 10});
    });
    $('#right').click(function(){
      $('#n_popup').flexModal({align: "right", x_offset: 30});
    });
    $('#bottom').click(function(){
      $('#n_popup').flexModal({align: "bottom"});
    });
    $('#left').click(function(){
      $('#n_popup').flexModal({align: "left"});
    });
  });
  function redirectNavFB(){
    {#    analytics.track('Click_Sign_Up_by_facebook', {#}
    {#      category: 'Account'#}
    {#    });#}
    {##}
    {#    analytics.page('Click_Sign_Up_by_facebook',#}
    {#      { title: 'Click_Sign_Up_by_facebook',#}
    {#        url: 'https://www.coworker.com/Click_Sign_Up_by_facebook'}#}
    {#    );#}
    window.location = "https://www.facebook.com/v2.5/dialog/oauth?client_id=778242928950690&state=64c0ab7cf12f5130ff0e20555e9f31af&response_type=code&sdk=php-sdk-5.0.0&redirect_uri=https%3A%2F%2Fwww.coworker.com%2Fcoworker_fb%2Flogin_fb&scope=email%2Cuser_friends";

  }
  function redirectNavFBForLogin(){

    {#    analytics.track('Click_Login_facebook_button', {#}
    {#      category: 'Account'#}
    {#    });#}
    {##}
    {#    analytics.page('Click_Login_facebook_button',#}
    {#      { title: 'Click_Login_facebook_button',#}
    {#        url: 'https://www.coworker.com/Click_Login_facebook_button'}#}
    {#    );#}
    window.location = "https://www.facebook.com/v2.5/dialog/oauth?client_id=778242928950690&state=64c0ab7cf12f5130ff0e20555e9f31af&response_type=code&sdk=php-sdk-5.0.0&redirect_uri=https%3A%2F%2Fwww.coworker.com%2Fcoworker_fb%2Flogin_fb&scope=email%2Cuser_friends";
  }


  function openNavLoging(){
    msg_login=0;
    $('#nvmy_Signup').normalSignupTitle();
    $('#nvloginModal').modal('toggle');
  }

  function openNavSignup(){
    msg_login=0;
    $('#nvmy_Signup').normalSignupTitle();
    $('#nvmy_Signup').modal('toggle');
  }

  function openNavSignupForm(){
    if(msg_login){
      $('#nvmy_Signup').msgSignupTitle();
    } else {
      $('#nvmy_Signup').normalSignupTitle();
    }

    {#    analytics.track('Click_Sign_Up_by_email', {#}
    {#      category: 'Account'#}
    {#    });#}
    {##}
    {#    analytics.page('Click_Sign_Up_by_email',#}
    {#      { title: 'Click_Sign_Up_by_email',#}
    {#        url: 'https://www.coworker.com/Click_Sign_Up_by_email'}#}
    {#    );#}


    $('#nvmy_Signup').modal('toggle');
    $('#n_popup').flexModal();
  }
  function navSignupLogin(){
    if(msg_login){
      $('#nvmy_Signup').msgSignupTitle();
    } else {
      $('#nvmy_Signup').normalSignupTitle();
    }
    $('#nvmy_Signup').modal('toggle');
    $('#nvloginModal').modal('toggle');
  }
  function navLoginSignup(){
    if(msg_login){
      $('#nvmy_Signup').msgSignupTitle();
    } else {
      $('#nvmy_Signup').normalSignupTitle();
    }
    $('#nvloginModal').modal('toggle');
    $('#nvmy_Signup').modal('toggle');
  }
  function openNavSignupLogin(){
    $('#flex-overlay').click();
    $('#nvloginModal').modal('toggle');
  }

  function isEmpty(str){
    return str.replace(/^\s+/g, '').length==0;
  }

  function validateNavSignup() {
    var f_name = $('#nvfirst_name').val();
    var l_name = $('#nvlast_name').val();
    var xemail = $('#nvemail').val();
    var pass   = $('#nvpassword').val();
    /*var xday   = $('#nvdaySelect').val();
	    var xmonth = $('#nvmonthSelect').val();
	    var xyear  = $('#nvyearSelect').val();*/
    var promotions = 0;
    if(jQuery('#c1').is(":checked"))
      promotions = 1;
    if (isEmpty(f_name)){
      alert('First Name is required!');
    } else if (isEmpty(l_name)){
      alert('Last Name is required!');
    } else if (isEmpty(xemail)){
      alert('Email is required!');
    } else if (!validateEmail(xemail)){
      alert('Invalid email!');
    } else if (isEmpty(pass)){
      alert('Password is required!');
    } /*else if (xday == -1){
	        alert('Day is required!');
	    } else if (xmonth == -1){
	        alert('Month is required!');
	    } else if (xyear == -1 ){
	        alert('Year is required!');
	    }*/ else {
      var message = {};
      message["Data"] = "New User Signup : "+f_name+" "+l_name;
      $.ajax({
        'url' : 'https://www.coworker.com/validate_navsignup',
        'type' : 'POST',
        'dataType': 'json',
        'data' : {'form_signup':1, 'fname' : f_name, 'lname' : l_name, 'semail' : xemail, 'spass' : pass,'day':0, 'month':0, 'year':0, 'promo':promotions, 'msg_log':msg_login},
        'success' : function(result){
          if(result.msg == 'SCS') {
            socket.emit('UserTrigerClient',message);

            // segment tracking
            {#            analytics.track('Signed_Up_by_email', {#}
            {#              category: 'Account',#}
            {#              label: 'Email',#}
            {#              SignUpType: 'Email',#}
            {#              SignUp_FirstName: f_name,#}
            {#              SignUp_LastName: l_name,#}
            {#              SignUp_Email: xemail#}
            {#            });#}
            {##}
            {#            analytics.page('Signed_Up_by_email',#}
            {#              { title: 'Signed_Up_by_email',#}
            {#                url: 'https://www.coworker.com/Signed_Up_by_email'}#}
            {#            );#}
            window.location.href = 'https://www.coworker.com/'+window.location.pathname.slice(1);
          } else {
            alert(result.error);
          }
        }
      });
    }
  }
  function validateNavLogin(e) {
    var xemail = $('#nvl_email').val();
    var pass   = $('#nvl_password').val();
    var $form = $(e.target).closest("form");
    if (isEmpty(xemail)){
      alert('Email is required!');
    } else if (!validateEmail(xemail)){
      alert('Invalid email!');
    } else if (isEmpty(pass)){
      alert('Password is required!');
    } else {
      $.ajax({
        'url' : $form.attr("action"),
        'type' : 'POST',
        'data' : $form.serialize(),
        'success' : function(result){
          if (result.form && result.form.errors.length !== 0) {
            alert(result.form.errors);
          } else {
            window.location.href = result.location;
          }
        }
      }).error(function(jqXHR, textStatus, errorThrown) {
      });
    }
  }

  /*-- INI :: Signup/login popup for list-space page --------------------------*/
  function showNewLoginPopup(){
    $('#newSignup2Wrapper').hide();
    $('#newSignup1Wrapper').hide();
    $('#newLoginWrapper').show();
  }
  function showNewCreationPopup1(){
    $('#newLoginWrapper').hide();
    $('#newSignup2Wrapper').hide();
    $('#newSignup1Wrapper').show();
  }
  function showNewCreationPopup2(){
    $('#newLoginWrapper').hide();
    $('#newSignup1Wrapper').hide();
    $('#newSignup2Wrapper').show();
  }

  function validateNewLogin(){
    var v_email = $('#fvl_email').val();
    var v_passw = $('#fvl_passw').val();
    var v_cu_id = $('#loc_cu_id').val();
    var v_token = $('#loc_n_token').val();
    //alert('email: '+v_email+' passw: '+v_passw+' cu_id: '+v_cu_id+' token: '+v_token);
    if ( isEmpty(v_email) ){
      alert('Email is required!');
    }
    else if (!validateEmail(v_email)){
      alert('Invalid email!');
    }
    else if ( isEmpty(v_passw) ){
      alert('Password is required!');
    }
    else{
      var postdata = {
        'form_login':1,
        'semail' : v_email,
        'spass' : v_passw,
        'stoken' : v_token
      }
      $.ajax({
        'url' : 'https://www.coworker.com/validate_navlogin',
        'type' : 'POST',
        'data' : postdata,
        'success' : function(data){
          var result = $.parseJSON(data);
          if(result.msg == 'SCS') {
            //window.location.href = 'https://www.coworker.com/'+window.location.pathname.slice(1);

            $('#cu_id').val(v_cu_id);
            $('#n_token').val(v_token);
            $('#n_step').val('continue');
            $('#redirform')[0].submit();


          } else {
            alert(result.error);
          }
        }
      });
    }
  }

  function validateNewSignup() {

    var v_fname = $('#fv_fname').val();
    var v_lname = $('#fv_lname').val();
    var v_email = $('#fv_email').val();
    var v_passw = $('#fv_passw').val();

    var v_cu_id = $('#loc_cu_id').val();
    var v_token = $('#loc_n_token').val();
    //alert('first Name:'+v_fname+' Last Name: '+v_lname+' Email: '+v_email+' Password: '+v_passw);

    var promotions = 0;
    //if(jQuery('#c1').is(":checked"))
    //  promotions = 1;
    if (isEmpty(v_fname)){
      alert('First Name is required!');
    } else if (isEmpty(v_lname)){
      alert('Last Name is required!');
    } else if (isEmpty(v_email)){
      alert('Email is required!');
    } else if (!validateEmail(v_email)){
      alert('Invalid email!');
    } else if (isEmpty(v_passw)){
      alert('Password is required!');
    } else {
      var datapost = {
        'form_signup':1,
        'fname' : v_fname,
        'lname' : v_lname,
        'semail' : v_email,
        'spass' : v_passw,
        'day':0,
        'month':0,
        'year':0,
        'promo':promotions,
        'stoken' : v_token
      }
      $.ajax({
        'url' : 'https://www.coworker.com/validate_navsignup',
        'type' : 'POST',
        'dataType': 'json',
        'data' : datapost,
        'success' : function(result){
          if(result.msg == 'SCS') {
            //window.location.href = 'https://www.coworker.com/'+window.location.pathname.slice(1);
            $('#cu_id').val(v_cu_id);
            $('#n_token').val(v_token);
            $('#n_step').val('continue');
            $('#redirform')[0].submit();
          } else {
            alert(result.error);
          }
        }
      });
    }

  }
  /*-- END :: Signup/login popup for list-space page --------------------------*/
  function showRecoverEmail(){
    swal({
        title: "Forgot password",
        text: "Please enter your email:",
        type: "input",
        showCancelButton: true,
        closeOnConfirm: true,
        animation: "slide-from-top",
        inputPlaceholder: "Email"
      },
      function(inputValue){
        if(inputValue === false) return false;
        else if(inputValue === "") {
          swal.showInputError("You need to write email!");
          return false;
        }
        else if(!validateEmail(inputValue)) {
          swal.showInputError("You need to write valid email!");
          return false;
        } else {
          $.ajax({
            'url' : 'https://www.coworker.com/reset_email',
            'type' : 'POST',
            'dataType': 'json',
            'data' : { mail : inputValue, form_reset : 1 },
            'success' : function(result){
              if(result.msg == 'SCS') {
                swal("Reset your password", "We can email you a link to reset it.")
              } else {
                swal.showInputError(result.error);
                return false;
              }
            }
          });
        }
      });
  }
  $(document).ready(function(){
    $('#mobBtnOpen').on('click', function(){
      //$('#mobBtnOpen').hide(500);
      //$('#mobileMenu').show(300);
      $('#mobileMenu').css({
        display:'block'
      });
    });
    $('#mobBtnClose').on('click', function(){
      //$('#mobileMenu').hide(300);
      //$('#mobBtnOpen').show(300);
      $('#mobileMenu').css({
        display:'none'
      });
    });
    $('#signupBtn').on('click', function(){
      $('#mobileMenu').css({
        display:'none'
      });
    });
    $('#loginBtn').on('click', function(){
      $('#mobileMenu').css({
        display:'none'
      });
    });
  });
</script>
<script src="{% static 'js/flex.modal.js' %}">
</script>
<script src="{% static 'js/sweetalert.min.js' %}">
</script>
<script type="text/javascript">
  $(function() {
    $("#h_location").keypress(function (e) {
      if (e.which == 13) {
        submitSearch();
      }
    });
  });

  function submitSearchH() {
    if($("#xh_location").val()!=$("#h_location").val()) {
      $("#h_place_id").val(0);
      $("#h_search_place").val(0);
    }
    $.ajax({
      url: '{% url "place:search" %}/start',
      dataType: "json",
      type: "POST",
      data: {
        h_place_id     : $("#h_place_id").val(),
        h_search_place : $("#h_search_place").val(),
        h_location     : $("#h_location").val(),
        form_search    : 2
      },
      success: function(data) {
        window.location = '{% url "place:search" %}/'+data.s_url;
      }
    });
  }

  $("#h_location").keypress(function(event) {
    if (event.which == 13) {
      event.preventDefault();
      submitSearchH();
    }
  });

  function overUserMenu(event) {
    $('#lg_h').show();
  }

  function outUserMenu(event) {
    var om = event.toElement || event.relatedTarget;
    var ce = ["lg_menu", "lg_c", "lg_p", "lg_s", "lg_i","lg_h"];
    if(om !== null){
      if (ce.indexOf(om.id)!=-1) {
        return;
      } else if($(om).closest("div").id=="lg_h"){
        return;
      } else {
        $('#lg_h').hide();
      }
    }
  }
  $(document).ready(function(){
    if($('#lg_menu').length>0) {
      document.getElementById("lg_menu").addEventListener('mouseout',outUserMenu,true);
      document.getElementById("lg_menu").addEventListener('mouseover',overUserMenu,true);
    }
  });

</script>

<span aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible" role="status"></span>
<div class="modal" id="nvmyLoading">
    <div class="col-sm-6 col-md-6 col-xs-6 loading-modal-content"><img src="{% static 'img/log_loading.gif' %}"></div>
</div>

<div class="modal" id="nvloginModal">
    <div class="col-sm-6 col-md-6 col-xs-6 login-modal-content">
        {% login_form %}
    </div>
    <div class="col-sm-12 col-md-12 col-xs-12 pade_none world_join_out">
        <div class="col-sm-3 col-md-3 col-xs-3"></div>
        <div class="col-sm-3 col-md-3 col-xs-3"></div>
    </div>
</div>

<div class="popup_outer" id="nvmy_Modal">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 pade_none popup_inner">
                <div class="popup" id="n_popup">
                    {% sign_up_form %}
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container modal" id="nvmy_Signup">
    <div class="col-xs-12 form_outer" id="fo_target">
        <div class="main-white">
            <h2 id="signup_title">{% trans "Join the SpacesMap community" %}</h2>
{#            <div class="col-xs-12 fcb_con">#}
                <!--<a href="javascript:void(0)" id="signup_href" onclick="redirectNavFB();"><img alt="" src="{% static 'img/continue_fb.png' %}"></a>-->
{#            </div>#}
{#            <h3>or</h3>#}
            <br>
            <br>
            <div class="col-xs-12 msg_con">
                <a href="javascript:void(0)" onclick="openNavSignupForm();"><img alt="" src="{% static 'img/img-msg.png' %}"></a>
            </div>
            <p>{% trans "Login means that you agree the SpacesMap" %}<a href="{% url "main:terms" %}" target="_blank">{% trans "Terms of service" %}</a> 和 <a href="{% url "main:privacy-policy" %}" target="_blank">{% trans "Privacy clause" %}</a></p>
            <h4>{% trans "Is it a member already?" %}" <a href="javascript:void(0);" onclick="navSignupLogin();">{% trans "Sign in" %}</a></h4>
        </div>
    </div>
</div>

<script src="{% static "js/my_common.js" %}"></script>
<script>

     function autocomplete(request, response) {
       var layer = this.element.attr("data-layer");
       var self = this.element;
       var q = {
           text: request.term,
           api_key: "mapzen-DEkuWBs",
           layers: layer,

         };

       if (layer != "country") {
         q["boundary.country"] = $("[name=country]").attr("data-code");
       }

        $.ajax({
         url: "https://search.mapzen.com/v1/autocomplete",
         dataType: "json",
         data: q,
         success: function (data) {
           var list = [];
           $.each(data.features, function (index, item) {
             if (item && item.properties) {
               var val;
               if (layer === "country") {
                 val = item.properties.country;
                 $(self).attr("data-code", item.properties.country_a)
               } else {
                 val = item.properties.locality;
               }
               list.push(val)
             }
           });
           response(Array.from(new Set(list)));
         }
       });
     }
      $(function() {
        $('input[name="daterange"]').daterangepicker();

        $(".autocomplete-api").autocomplete({
          source: autocomplete,
          minLength: 3,
          select: function( event, ui ) {
{#            log( "Selected: " + ui.item.value + " aka " + ui.item.id );#}
          }
        });
      });


    </script>
 <script src="{% static 'js/owl.carousel.js' %}" type="text/javascript"></script>


</body>
</html>
