{% load static %}
{% load i18n %}
<!-- Include Required Prerequisites -->

<div class="container-agoda">


    <div id="hero-banner-hosted">

        <ul id="hero-banner-tab-nav" class="ag-tab-nav clearfix">
            <li class="active"><a href="#tab-hotel" data-toggle="tab" data-tab="hotel">{% trans "Spaces" %}</a></li>

            <li class=""><a href="#tab-flight" data-toggle="tab" data-tab="flight">{% trans "Activities" %}</a></li>
            <li class=""><a href="#tab-service" data-toggle="tab" data-tab="flight">{% trans "Services" %}</a></li>
        </ul>
        <div class="tab-content" id="tab-content">
            <div id="tab-hotel" class="tab-pane active">

                <div class="search-bar" data-selenium="search-bar">
                    <div class="container-agoda">
                        <div id="oneline-searchbox" class="oneline-searchbox" data-selenium="searchBox">

                            <dl class="form-group ">
                                <dd data-selenium="input-box">
                                    <div class="search">
                                        <i class="fa fa-search fa-1x"></i>
                                        <div class="container-cell">
                                            <input id="f_location" name="f_location" type="text" class="form-control text-editor oneline-text-editor" placeholder="{% trans "Space name" %}">
                                        </div>
                                    </div>
                                </dd>
                            </dl>

                            <dl class="form-group ">
                                <dd data-selenium="input-box">
                                    <div class="search dist">
                                        <div class="container-cell">
                                            <input type="text" name="country" data-layer="country" class="autocomplete-api form-control text-editor oneline-text-editor" placeholder="{% trans "Country" %}">

                                        </div>
                                    </div>
                                </dd>
                            </dl>

                            <dl class="form-group ">
                                <dd data-selenium="input-box">
                                    <div class="search dist">
                                        <div class="container-cell">
                                            <input type="text" name="city" data-layer="locality" class="autocomplete-api form-control text-editor oneline-text-editor" placeholder="{% trans "City" %}">

                                        </div>
                                    </div>
                                </dd>
                            </dl>
                            <dl class="form-group">
                                <dd data-selenium="input-box">
                                    <div class="search dist">
                                        <div class="container-cell">
                                            <input type="text" class="auto-complete-ui place form-control text-editor oneline-text-editor" placeholder="{% trans "Type" %}">
                                        </div>
                                    </div>
                                </dd>
                            </dl>
                            <dl class="form-actions">
                                <dd class="actions">
                                    <button type="submit" class="btn btn-primary search-button oneline-search-button" data-url="{% url "place:search" %}">
                                        <span class="js-search-button-unclicked-label">
                                            {% trans "Search" %}
                                        </span>

                                        <span class="js-search-button-clicked-label search-button-clicked-label">
                                            <i class="submit-progress-spinner"></i>
                                        </span>
                                    </button>
                                </dd>
                            </dl>

                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-flight" class="tab-pane">
                <div class="search-bar" data-selenium="search-bar">
                    <form action="{% url "events:search" %}" method="GET">
                        <div class="container-agoda">
                            <div id="oneline-searchbox" class="oneline-searchbox" data-selenium="searchBox">
                                <dl class="form-group ">
                                    <dd data-selenium="input-box">
                                        <div class="search">
                                            <i class="fa fa-search fa-1x"></i>
                                            <div class="container-cell">
                                                <input type="text" name="q" class="form-control text-editor oneline-text-editor" placeholder="{% trans "Activity" %}">
                                            </div>
                                        </div>
                                    </dd>
                                </dl>

                                <dl class="form-group ">
                                    <dd data-selenium="input-box">
                                        <div class="search dist">
                                            <div class="container-cell">
                                                <input type="text" name="country" data-layer="country" class="autocomplete-api form-control text-editor oneline-text-editor" placeholder="{% trans "Country" %}">

                                            </div>
                                        </div>
                                    </dd>
                                </dl>

                                <dl class="form-group ">
                                    <dd data-selenium="input-box">
                                        <div class="search dist">
                                            <div class="container-cell">
                                                <input type="text" name="city" data-layer="locality" class="autocomplete-api form-control text-editor oneline-text-editor" placeholder="{% trans "City" %}">
                                            </div>
                                        </div>
                                    </dd>
                                </dl>
                                <dl class="form-group">
                                    <dd class="dates checkin">
                                        <div id="olsb-checkIn" class="date">

                                            <i class="fa fa-calendar fa-1x"></i>
                                            <div class="container-cell">
                                                <input type="text" name="daterange" class="form-control daterange oneline-checkin checkin-input date-input hasDatepicker"  data-date="2017-11-10">
                                                <span id="checkInWeekday"></span>
                                            </div>
                                        </div>
                                    </dd>
                                </dl>
                                <dl class="form-actions">
                                    <dd class="actions">
                                        <button type="submit" class="btn btn-primary search-button oneline-search-button">
                                            <span class="js-search-button-unclicked-label">
                                                {% trans "Search" %}
                                            </span>

                                            <span class="js-search-button-clicked-label search-button-clicked-label">
                                                <i class="submit-progress-spinner"></i>
                                            </span>
                                        </button>
                                    </dd>
                                </dl>

                            </div>
                        </div>
                    </form>

                </div>
            </div>

            <div id="tab-service" class="tab-pane">

                <div class="search-bar" data-selenium="search-bar">
                    <div class="container-agoda">
                        <div id="oneline-searchbox" class="oneline-searchbox" data-selenium="searchBox">

                            <dl class="form-group ">
                                <dd data-selenium="input-box">
                                    <div class="search">
                                        <i class="fa fa-search fa-1x"></i>
                                        <div class="container-cell">
                                            <input type="text" class="form-control text-editor oneline-text-editor" placeholder="{% trans "Services Name/Spaces Name" %}">
                                        </div>
                                    </div>
                                </dd>
                            </dl>

                            <dl class="form-group ">
                                <dd data-selenium="input-box">
                                    <div class="search dist">
                                        <div class="container-cell">
                                            <input id="country" type="text" class="auto-complete-ui form-control text-editor oneline-text-editor" placeholder="{% trans "Country" %}" >
                                        </div>
                                    </div>
                                </dd>
                            </dl>

                            <dl class="form-group ">
                                <dd data-selenium="input-box">
                                    <div class="search dist">
                                        <div class="container-cell">
                                            <input type="text" class="auto-complete-ui form-control text-editor oneline-text-editor" placeholder="{% trans "City" %}">
                                        </div>
                                    </div>
                                </dd>
                            </dl>
                            <dl class="form-group ">
                                <dd data-selenium="input-box">
                                    <div class="search dist">
                                        <div class="container-cell">
                                            <input type="text" class="auto-complete-ui service form-control text-editor oneline-text-editor" placeholder="{% trans "Type" %}">
                                        </div>
                                    </div>
                                </dd>
                            </dl>
                            <dl class="form-actions">
                                <dd class="actions">
                                    <button type="submit" class="btn btn-primary search-button oneline-search-button" data-url="{% url "services:search" %}">
                                        <span class="js-search-button-unclicked-label">
                                            {% trans "Search" %}
                                        </span>

                                        <span class="js-search-button-clicked-label search-button-clicked-label">
                                            <i class="submit-progress-spinner"></i>
                                        </span>
                                    </button>
                                </dd>
                            </dl>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<script>
  $(function() {
    $('input[name="daterange"]').daterangepicker();
    $(".auto-complete-ui.place").autocomplete({
      source: {{ place_category|safe }},
      minLength: 0
    });
    $(".auto-complete-ui.service").autocomplete({
      source: {{ service_categories|safe }},
      minLength: 0
    });

    $(".auto-complete-ui").on("focus", function () {
      this.value = '';
      $(this).autocomplete("search", '');
    });
  });
</script>

{#<script>#}
{#  $(function() {#}
{#    $("[name=h_location]").autocomplete({#}
{#      source: function (request, response) {#}
{#        $.ajax({url: "{% url "search:place" %}",#}
          {#              dataType: "json",#}
{#          type: "GET",#}
{#          data: {#}
{#            search : request.term#}
{#          },#}
{#          success: function(result) {#}
{##}
{#            response(result);#}
{#          }#}
{#        });#}
{##}
{#      }#}
{#    });#}
{#  });#}
{#</script>#}


<script type="text/javascript">
    $(function() {
      $("#f_location").autocomplete({
        source: function(request, response) {
          $("#place_id").val(0);
          $("#search_place").val(0);
          $.ajax({
            url: '{% url "search:place" %}',
            dataType: "json",
            type: "GET",
            data: {
              search : request.term
            },
            success: function(data) {
              response(data);
              /*if(data.length>0){
                var prefix = $('#f_location').val().toLowerCase();
                var first_item = data[0].value.toLowerCase();
                if(first_item.slice(0, prefix.length) == prefix){
                  $('#f_location').val(data[0].value);
                  $('#f_location').selectRange(prefix.length,first_item.length);
                }
              }*/
            }
          });
        },minLength:1,
        messages: {
          noResults: '',
          results: function() {}
        },appendTo: "#f_aucomplete",
        select: function (event, ui) {
{#          $("#place_id").val(ui.item.idx);#}
{#          $("#search_place").val(ui.item.loc);#}
{#          $("#x_location").val(ui.item.value);#}
{#          $('#f_location').val(ui.item.value);#}
{#          if(ui.item.loc==3){#}
{#            if(ui.item.coworkspace_url!='')#}
{#              window.location = ui.item.coworkspace_url;#}
{#          } else#}
{#            submitSearch();#}
        }
      }).autocomplete( "instance" )._renderItem = function( ul, item ) {
        var loc_icon = '<i class="fa fa-buildingui"></i>';
{#        var view_all = '';#}
{#        if(item.loc==1)#}
{#          loc_icon = '<i class="fa fa-globeui"></i>';#}
{#        if((item.loc==2) || (item.loc==2.5))#}
{#          loc_icon = '<i class="fa fa-map-markerui"></i>';#}
{#        if(item.loc==5)#}
{#          loc_icon = '<i class="fa fa-map-markerui"></i>';#}
{#        if(item.loc==10)#}
{#          loc_icon = '<i class="fa fa-map-markerui"></i>';#}
{#        if(item.loc==0){#}
{#          loc_icon = "";#}
{#          view_all = 'class="search_view_results_div pade_none"';#}
{#        }#}
        return $( "<li "+view_all+">" ).append( loc_icon + item.label ).appendTo( ul );
      };
    });

  function submitSearch() {
    if($("#x_location").val()!=$("#f_location").val()) {
      $("#place_id").val(0);
      $("#search_place").val(0);
    }
    $.ajax({
      url: 'https://www.coworker.com/search/start',
      dataType: "json",
      type: "POST",
      data: {
        place_id     : $("#place_id").val(),
        search_place : $("#search_place").val(),
        f_location   : $("#f_location").val(),
        form_search  : 1
      },
      success: function(data) {
        window.location = 'search/'+data.s_url;
      }
    });
  }
  $("#f_location").keypress(function(event) {
    if (event.which == 13) {
      event.preventDefault();
      submitSearch();
    }
  });
  $(document).ready(function() {
    var owl = $('#owl-demo02');
    owl.owlCarousel({
      stagePadding: 0,
      margin: 10,
      nav: true,
      loop: true,
      responsive: {
        0   : { items: 2 },
        600 : { items: 3 },
        900 : { items: 5 },
        1000: { items: 6 }
      }
    });
    var owl = $('#owl-demo03');
    owl.owlCarousel({
      stagePadding: 0,
      margin: 10,
      nav: true,
      loop: true,
      responsive: {
        0   : { items: 1 },
        400 : { items: 1 },
        600 : { items: 2 },
        768 : { items: 3 },
        900 : { items: 3 },
        1000: { items: 4 },
        1200: { items: 5 },
        1300: { items: 5 },
        1400: { items: 5 }
      }
    });
    $("#owl-demo05").owlCarousel({
      navigation : true,
      slideSpeed : 300,
      paginationSpeed : 400,
      singleItem : true,
      nav: true,
      loop: true,
      items : 1,
    });
  });
</script>
